"use strict";(self.webpackChunkbored_capybara_web=self.webpackChunkbored_capybara_web||[]).push([["152"],{879:function(){},272:function(){},157:function(e,t,n){var r,a,i,s,l,o,d,c,u,h,p,m;function g(e,t,n){if(t[e])return t[e];if(customElements.get(e))return t[e]=e,e;let r=e.includes("-")?e:`x-${e}`;return customElements.get(r)?t[e]=r:n?.push(customElements.whenDefined(r)),r}let y="lynx-unique-id",v="lynx-component-id",f="lynx-parent-component-uid",b="lynx-card-id",x="lynx-tag",w=Symbol("lynx-runtime-value"),E="lynx-view-root",T={click:"tap",lynxscroll:"scroll",lynxscrollend:"scrollend",overlaytouch:"touch",lynxfocus:"focus",lynxblur:"blur"},C={"X-INPUT":{blur:"lynxblur",focus:"lynxfocus"},"X-TEXTAREA":{blur:"lynxblur",focus:"lynxfocus"}},_={tap:"click",scroll:"lynxscroll",scrollend:"lynxscrollend",touch:"overlaytouch"};function S(e,t,n=!0,r){return{name:e,isSync:t,hasReturn:n,bufferSize:r}}let M=S("__postExposure",!1,!1),A=S("publicComponentEvent",!1,!1),N=S("publishEvent",!1,!1),O=S("postMainThreadEvent",!1,!1),U=S("__switchExposureService",!1,!1),R=S("mainThreadStart",!1,!1),k=S("updateData",!1,!0),D=S("sendGlobalEventEndpoint",!1,!1),P=S("dispose",!1,!0),H=S("postTimingResult",!1,!1),I=S("uiThreadFpReady",!1,!1);S("__OnLifecycleEvent",!1,!1),S("start",!1,!0);let L=S("loadNewTag",!1,!0),$=S("reportError",!1,!0),B=S("flushElementTree",!1,!0),F=S("mainThreadChunkReady",!1,!1),W=S("postTimingInfoFromMainThread",!1,!1);S("callLepusMethod",!1,!0);let K=S("__invokeUIMethod",!1,!0),j=S("__setNativeProps",!1,!0),q=S("nativeModulesCall",!1,!0);S("getCustomSections",!1,!0);let z=S("postTimingInfoFromBackgroundThread",!1,!1),J=S("__triggerComponentEvent",!1,!1),V=S("__selectComponent",!1,!0);function X(e){let t=e.target,n=e.currentTarget,r=e.type,a={};return r.match(/^transition/)?Object.assign(a,{animation_type:"keyframe-animation",animation_name:e.propertyName,new_animator:!0}):r.match(/animation/)&&Object.assign(a,{animation_type:"keyframe-animation",animation_name:e.animationName,new_animator:!0}),{type:T[r]??r,timestamp:e.timeStamp,target:{id:t.id,dataset:t[w].dataset,uniqueId:parseFloat(t.getAttribute(y))},currentTarget:{id:n.id,dataset:n[w]?.dataset??{},uniqueId:parseFloat(n.getAttribute(y))},detail:e.detail??{},params:a}}function G(e,t,n,r,s,l,o,d){let c,u=e;if(l){let t=e.querySelector(`[${y}="${l}"]`);if(t)u=t;else{console.error(`[lynx-web] cannot find dom for root_unique_id: ${l}`),d?.(i.NODE_NOT_FOUND);return}}else if(r){let t=e.querySelector(`[${v}="${r}"]`);if(t)u=t;else{console.error(`[lynx-web] cannot find dom for component_id: ${r}`),d?.(i.NODE_NOT_FOUND);return}}if(t===a.ID_SELECTOR)c=n;else if(t===a.UNIQUE_ID)c=`[${y}="${n}"]`;else{console.error(`[lynx-web] NYI: setnativeprops type ${t}`),d?.(i.UNKNOWN);return}if(s){let e=null;try{e=u.querySelector(c)}catch(e){console.error(`[lynx-web] cannot use selector: ${c}`),d?.(i.SELECTOR_NOT_SUPPORTED);return}e?o(e):(console.error(`[lynx-web] cannot find from for selector ${n} under`,u),d?.(i.NODE_NOT_FOUND))}else u.querySelectorAll(c).forEach(e=>{o(e)})}(d=r||(r={}))[d.Create=0]="Create",d[d.SetAttribute=1]="SetAttribute",d[d.SetProperty=2]="SetProperty",d[d.SwapElement=3]="SwapElement",d[d.Append=4]="Append",d[d.Remove=5]="Remove",d[d.Replace=6]="Replace",d[d.SetDatasetProperty=7]="SetDatasetProperty",d[d.InsertBefore=8]="InsertBefore",d[d.SetStyleProperty=9]="SetStyleProperty",d[d.UpdateCssInJs=10]="UpdateCssInJs",d[d.RegisterEventHandler=11]="RegisterEventHandler",(c=a||(a={}))[c.ID_SELECTOR=0]="ID_SELECTOR",c[c.REF_ID=1]="REF_ID",c[c.UNIQUE_ID=2]="UNIQUE_ID",(u=i||(i={}))[u.SUCCESS=0]="SUCCESS",u[u.UNKNOWN=1]="UNKNOWN",u[u.NODE_NOT_FOUND=2]="NODE_NOT_FOUND",u[u.METHOD_NOT_FOUND=3]="METHOD_NOT_FOUND",u[u.PARAM_INVALID=4]="PARAM_INVALID",u[u.SELECTOR_NOT_SUPPORTED=5]="SELECTOR_NOT_SUPPORTED",u[u.NO_UI_FOR_NODE=6]="NO_UI_FOR_NODE",(h=s||(s={}))[h.NotCanceled=0]="NotCanceled",h[h.CanceledByEventHandler=1]="CanceledByEventHandler",h[h.CanceledByDefaultEventHandler=2]="CanceledByDefaultEventHandler",h[h.CanceledBeforeDispatch=3]="CanceledBeforeDispatch",(p=l||(l={}))[p.UPDATE=0]="UPDATE",p[p.RESET=1]="RESET",(m=o||(o={}))[m.Unknown=0]="Unknown",m[m.UpdateExplictByUser=1]="UpdateExplictByUser",m[m.UpdateByKernelFromCtor=2]="UpdateByKernelFromCtor",m[m.UpdateByKernelFromRender=4]="UpdateByKernelFromRender",m[m.UpdateByKernelFromHydrate=8]="UpdateByKernelFromHydrate",m[m.UpdateByKernelFromGetDerived=16]="UpdateByKernelFromGetDerived",m[m.UpdateByKernelFromConflict=32]="UpdateByKernelFromConflict",m[m.UpdateByKernelFromHMR=64]="UpdateByKernelFromHMR";let Q={boundingClientRect:e=>{let t=e.getBoundingClientRect();return{id:e.id,dataset:e[w].dataset,width:t.width,height:t.height,left:t.left,right:t.right,top:t.top,bottom:t.bottom}}};class Y{port;name;incId=0;#e={};#t=new TextEncoder;#n=new TextDecoder;#r=new Map;constructor(e,t){this.port=e,this.name=t,e.onmessage=e=>this.#a(e.data)}get nextRetId(){return`ret_${this.name}_${this.incId++}`}static createRetEndpoint(e){return{name:e,hasReturn:!1,isSync:!1}}#a=async e=>{console.warn(`[rpc] on ${this.name} received ${e.name}`,e);let t=this.#r.get(e.name);if(t){let n=e.sync?new Int32Array(e.lock):void 0,r=!e.sync&&e.retId?Y.createRetEndpoint(e.retId):void 0;try{let a=await t(...e.data);if(e.sync){if(e.buf){let t=JSON.stringify(a),n=new Uint32Array(e.buf,0,1),r=new Uint8Array(e.buf,4),i=new Uint8Array(e.buf.byteLength-4),{written:s}=this.#t.encodeInto(t,i);n[0]=s,r.set(i,0)}Atomics.store(n,0,1),Atomics.notify(n,0)}else e.retId&&this.invoke(r,[a,!1])}catch(t){console.error(t),e.sync?(Atomics.store(n,0,2),Atomics.notify(n,0),n[1]=2):this.invoke(r,[void 0,!0])}}else{let t=this.#e[e.name];t?t.push(e):this.#e[e.name]=[e]}};createCall(e){return(...t)=>this.invoke(e,t)}registerHandler(e,t){this.#r.set(e.name,t);let n=this.#e[e.name];if(n?.length)for(let t of(this.#e[e.name]=void 0,n))this.#a(t)}registerHandlerRef(e,t,n){this.registerHandler(e,(...e)=>t[n]?.call(t,...e))}registerHandlerLazy(e,t,n){if(t[n])this.registerHandlerRef(e,t,n);else{let r;let a=this;Object.defineProperty(t,n,{get:()=>r,set(i){r=i,i&&a.registerHandlerRef(e,t,n)}})}}removeHandler(e){this.#r.delete(e.name)}invoke(e,t,n=[]){if(e.isSync){let r=e.bufferSize?new SharedArrayBuffer(e.bufferSize+4):void 0,a=new SharedArrayBuffer(4),i=new Int32Array(a);i[0]=0;let s={name:e.name,data:t,sync:!0,lock:a,buf:r};if(this.port.postMessage(s,{transfer:n}),Atomics.wait(i,0,0),2===i[0])throw null;if(!r)return;{let e=new Uint32Array(r,0,4)[0],t=new Uint8Array(r,4,e),n=new Uint8Array(e);return n.set(t,0),n?JSON.parse(this.#n.decode(n)):void 0}}if(e.hasReturn){let{promise:r,resolve:a,reject:i}=Promise.withResolvers(),s=Y.createRetEndpoint(this.nextRetId);this.registerHandler(s,(e,t)=>{t&&i(),a(e)});let l={name:e.name,data:t,sync:!1,retId:s?.name};return this.port.postMessage(l,{transfer:n}),r}{let r={name:e.name,data:t,sync:!1};this.port.postMessage(r,{transfer:n})}}createCallbackify(e,t){let n=this.createCall(e);return(...e)=>{let r=e.at(t);e.splice(t,1),n(...e).then(r)}}}let Z=ee();function ee(){let e=new MessageChannel,t=new MessageChannel,r=new Worker(new URL(n.p+n.u("334"),n.b),Object.assign({},{type:"module",name:"lynx-main"},{type:void 0})),a={mode:"main",toUIThread:e.port2,toPeerThread:t.port1};return r.postMessage(a,[e.port2,t.port1]),{mainThreadRpc:new Y(e.port1,"ui-to-main"),mainThreadWorker:r,channelMainThreadWithBackground:t}}function et(e,t){let n=t[e]?.deref();if(n)return n;throw Error(`[lynx-web] cannot find element with uniqueId: ${e}`)}function en(e){let t=e.currentTarget;if(!t)return;let{eventHandler:n}=t[w],r=n[T[e.type]??e.type];if(r){let{type:t,handler:n}=r;n(e),("catchEvent"===t||"capture-catch"===t)&&e.stopPropagation()}}let er=window.navigator.userAgent;er.includes("Chrome");let ea=/\b(iPad|iPhone|iPod|OS X)\b/.test(er)&&!/Edge/.test(er)&&/WebKit/.test(er)&&!window.MSStream,ei=!!globalThis.CSSScopeRule,es={};function el(e,t,n){return Object.fromEntries(Object.entries(e).map(([e,r])=>{var a;return[e,(a=`globalThis.module.exports = function(lynx_runtime) {
const module= {exports:{}};let exports = module.exports;
var {${t.join(",")}} = lynx_runtime; 
${n.map(e=>`const ${e} = lynx_runtime.${e}?.bind(lynx_runtime)`).join(";")}
var globDynamicComponentEntry = '__Card__';
var {__globalProps} = lynx;
${r}
return module.exports;}`,URL.createObjectURL(new Blob([a],{type:"text/javascript"})))]}))}let eo=["lynx","globalThis"],ed=["NativeModules","globalThis","lynx","lynxCoreInject"],ec=["Card","Component"];async function eu(e){let t=es[e];if(t)return t;let n=await (await fetch(e,{method:"GET"})).json(),r={...n,lepusCode:el(n.lepusCode,eo,[]),manifest:el(n.manifest,ed,ec)};return es[e]=r,r}let eh=new Set;function ep(e){if(!(eh.has(e)||customElements.get(e)))switch(e){case"lynx-wrapper":Promise.all([n.e("361"),n.e("128")]).then(n.bind(n,475)),eh.add(e);return;case"scroll-view":Promise.all([n.e("361"),n.e("290")]).then(n.bind(n,251)),eh.add(e);return;case"x-audio-tt":Promise.all([n.e("361"),n.e("939")]).then(n.bind(n,532)),eh.add(e);return;case"x-canvas":Promise.all([n.e("361"),n.e("607")]).then(n.bind(n,259)),eh.add(e);return;case"x-foldview-ng":case"x-foldview-header-ng":case"x-foldview-toolbar-ng":case"x-foldview-slot-ng":case"x-foldview-slot-drag-ng":Promise.all([n.e("361"),n.e("423")]).then(n.bind(n,246)),eh.add("x-foldview-ng"),eh.add("x-foldview-header-ng"),eh.add("x-foldview-toolbar-ng"),eh.add("x-foldview-slot-ng"),eh.add("x-foldview-slot-drag-ng");return;case"x-image":case"filter-image":Promise.all([n.e("361"),n.e("829")]).then(n.bind(n,873)),eh.add("x-image"),eh.add("filter-image");return;case"x-input":Promise.all([n.e("361"),n.e("157")]).then(n.bind(n,422)),eh.add(e);return;case"x-list":Promise.all([n.e("361"),n.e("357")]).then(n.bind(n,764)),eh.add("x-list"),eh.add("list-item");return;case"x-overlay-ng":Promise.all([n.e("361"),n.e("395")]).then(n.bind(n,916)),eh.add(e);return;case"x-refresh-view":case"x-refresh-header":case"x-refresh-footer":Promise.all([n.e("361"),n.e("919")]).then(n.bind(n,85)),eh.add("x-refresh-view"),eh.add("x-refresh-header"),eh.add("x-refresh-footer");return;case"x-svg":Promise.all([n.e("361"),n.e("96")]).then(n.bind(n,248)),eh.add(e);return;case"x-swiper":case"x-swiper-item":Promise.all([n.e("361"),n.e("23")]).then(n.bind(n,111)),eh.add("x-swiper"),eh.add("x-swiper-item");return;case"x-text":case"inline-text":case"inline-image":case"inline-truncation":case"raw-text":Promise.all([n.e("361"),n.e("988")]).then(n.bind(n,905)),eh.add("x-text"),eh.add("inline-text"),eh.add("inline-image"),eh.add("inline-truncation"),eh.add("raw-text");return;case"x-textarea":Promise.all([n.e("361"),n.e("902")]).then(n.bind(n,229)),eh.add(e);return;case"x-view":Promise.all([n.e("361"),n.e("237")]).then(n.bind(n,383)),eh.add(e);return;case"x-viewpager-ng":case"x-viewpager-item-ng":Promise.all([n.e("361"),n.e("517")]).then(n.bind(n,474)),eh.add("x-viewpager-ng"),eh.add("x-viewpager-item-ng");return}}ep("lynx-wrapper"),ep("x-view"),ep("x-text"),ep("x-image"),ep("scroll-view");class em extends HTMLElement{static lynxViewCount=0;static tag="lynx-view";static observedAttributeAsProperties=["url","globalProps","initData","overrideLynxTagToHTMLTagMap","nativeModulesUrl"];static attributeCamelCaseMap=Object.fromEntries(this.observedAttributeAsProperties.map(e=>[e.toLocaleLowerCase(),e]));static observedAttributes=em.observedAttributeAsProperties.map(e=>e.toLowerCase());#i;#s;get url(){return this.#s}set url(e){this.#s=e,this.#l()}#o={};get globalProps(){return this.#o}set globalProps(e){"string"==typeof e?this.#o=JSON.parse(e):this.#o=e}#d={};get initData(){return this.#d}set initData(e){"string"==typeof e?this.#d=JSON.parse(e):this.#d=e}#c;get entryId(){return this.#c}#u={page:"div"};get overrideLynxTagToHTMLTagMap(){return this.#u}set overrideLynxTagToHTMLTagMap(e){"string"==typeof e?this.#u=JSON.parse(e):this.#u=e}#h=[];#p;get onNativeModulesCall(){return this.#p}set onNativeModulesCall(e){if(this.#p=e,this.#h)for(let t of this.#h)e.apply(void 0,t)}#m;get nativeModulesUrl(){return this.#m}set nativeModulesUrl(e){this.#m=e}#g=!1;#y=!1;#v=0;#f=0;get height(){return this.#g?"auto":null}get width(){return this.#y?"auto":null}set height(e){this.#b(),this.#g="auto"===e}set width(e){this.#b(),this.#y="auto"===e}#b(){this.#g||this.#y?this.#i&&!this.#i.resizeObserver&&(this.#i.resizeObserver=new ResizeObserver(e=>{let t=e[0];if(t){let{width:e,height:n}=t.contentRect;this.#y&&this.#v!==e&&(this.#v=e,this.style.setProperty("--lynx-view-width",`${e}px`)),this.#g&&this.#f!==n&&(this.#f=n,this.style.setProperty("--lynx-view-height",`${n}px`))}}),this.#i.resizeObserver.observe(this.#i.rootDom)):this.#i?.resizeObserver&&this.#i.resizeObserver.disconnect(),this.#g?this.setAttribute("height","auto"):this.removeAttribute("height"),this.#y?this.setAttribute("width","auto"):this.removeAttribute("width")}updateData(e,t,n){this.#i?.lynxView.updateData(e,t,n)}sendGlobalEvent(e,t){this.#i?.lynxView.sendGlobalEvent(e,t)}reload(){this.#l()}setAttribute(e,t){"false"===t?this.removeAttribute(e):super.setAttribute(e,t)}attributeChangedCallback(e,t,n){t!==n&&(e=em.attributeCamelCaseMap[e]??e)in this&&(this[e]=n)}disconnectedCallback(){this.#i&&(this.#i.resizeObserver?.disconnect(),this.#i.lynxView.dispose(),this.#i.rootDom.remove()),this.#i=void 0}#x=!1;#l(){this.#x||(this.#x=!0,queueMicrotask(()=>{if(this.#x=!1,this.#i&&this.disconnectedCallback(),this.#s){let e=document.createElement("div");e.id=E;let t=`lynx-view-id-${em.lynxViewCount++}`;this.#c=t,e.setAttribute(b,t),e.setAttribute("part",E);let s={entryId:t},l=function(e){let{rootDom:t,callbacks:s,templateUrl:l,globalProps:o,entryId:d,initData:c,overrideLynxTagToHTMLTagMap:u,nativeModulesUrl:h}=e;return function(e,t,s,l,o={},d){let c=performance.now()+performance.timeOrigin,{entryId:u}=t,h=[],{mainThreadRpc:p,backgroundRpc:m,terminateWorkers:E}=function(){let e=Z,t=function(e){let t=new MessageChannel,r=new Worker(new URL(n.p+n.u("649"),n.b),Object.assign({},{type:"module",name:"lynx-bg"},{type:void 0})),a={mode:"background",toUIThread:t.port2,toPeerThread:e.port2};return r.postMessage(a,[t.port2,e.port2]),{backgroundRpc:new Y(t.port1,"ui-to-bg"),backgroundThreadWorker:r}}(e.channelMainThreadWithBackground);return Z=ee(),{mainThreadRpc:e.mainThreadRpc,backgroundRpc:t.backgroundRpc,terminateWorkers:()=>{e.mainThreadWorker.terminate(),t.backgroundThreadWorker.terminate()}}}(),T=m.createCall(D),S=m.createCall(I),er=p.createCall(R),{markTimingInternal:es,sendTimingResult:el}=function(e,t,n){let r={},a=new Map,i=[];function s(e,t,n){if(n||(n=performance.now()+performance.timeOrigin),!t){r[e]=n;return}a.has(t)||a.set(t,{}),a.get(t)[e]=n}return e.registerHandler(W,s),t.registerHandler(z,s),{markTimingInternal:s,sendTimingResult:function(e,s,l){let o=(e?a.get(e):void 0)??{};e?s=s.concat(i):i=i.concat(s),t.invoke(H,[e,o,s,l?r:void 0]),n.dispatchEvent(new CustomEvent("timing",{detail:l?r:o,bubbles:!0,cancelable:!0})),e&&a.delete(e)}}}(p,m,s);return es("create_lynx_start",void 0,c),es("load_template_start"),eu(e).then(e=>{es("load_template_end"),er({...t,template:e,nativeModulesUrl:d})}),function(e,t,n,r,a){e.registerHandler(t,e=>{n(g(e,r,a))})}(p,L,e=>{if(l.loadNewTag)l.loadNewTag(e);else if(!customElements.get(e)&&e.includes("-"))throw Error(`[lynx-web] cannot find custom element ${e}`)},o,h),function(e,t){e.registerHandler($,e=>{t?.(e)})}(p,l.onError),p.registerHandler(F,e=>{let{pageConfig:t}=e;!function(e,t,n,a,i){let{pageConfig:s,overrideTagMap:l,backgroundRpc:o,rootDom:d,entryId:c,currentLoadingTags:u}=n,h=[],p=[],m=document.createElement("style");s.enableCSSSelector||(m.innerHTML=`/* enableCSSSelector: false */ ${ei&&!ea?"@scope { :scope{} }":""}`,d.append(m));let E=m?.sheet?.cssRules[0],T=e=>{let t=g(e,l),n=document.createElement(t);return n[w]={dataset:{},eventHandler:{}},n},S=(e,t)=>{let n=`[${y}="${e.toString()}"]{${t}}`;if(E){let e=E.insertRule(n);return E.cssRules[e]}{let e=m.sheet.insertRule(`[${b}="${c}"] ${n}`);return m.sheet.cssRules[e]}},M=t=>{let n=X(t);e.invoke(O,[n])},U=e=>{let t=X(e),n=e.currentTarget,r=n.getAttribute(f)??"0",a=d.querySelector(`[${y}="${r}"]`),i=a?.getAttribute(x)!=="page"?a?.getAttribute(v)??void 0:void 0,s=n[w].eventHandler[t.type].hname;i?o.invoke(A,[i,s,t]):o.invoke(N,[s,t])};e.registerHandler(t,(e,t,n)=>{let{pipelineOptions:l}=t,o=l?.pipelineID,m=[];i("dispatch_start",o),Promise.all(u).then(()=>{i("layout_start",o),i("ui_operation_flush_start",o);let t=function(e,t){let n;let{uniqueIdToElement:a,uniqueIdToCssInJsRule:i,createElementImpl:s,createStyleRuleImpl:l,eventHandler:o,timingFlags:d}=t;for(let t of e)if(t.type===r.Create){let e=function(e,t,n,r){if(n[t]?.deref())throw Error(`[lynx-web] uniqueid is occupied: cannot create new element ${e} with uniqueId: ${t}`);let a=r(e);return a.setAttribute(y,t.toString()),a.setAttribute(x,e),n[t]=new WeakRef(a),a}(t.tag,t.uid,a,s);"number"==typeof t.cssId&&e.setAttribute("lynx-css-id",t.cssId.toString()),t.puid&&e.setAttribute(f,t.puid),"page"===t.tag&&(n=e)}else{let e=et(t.uid,a);switch(t.type){case r.Append:{let n=t.cid.map(e=>et(e,a));e.append(...n)}break;case r.InsertBefore:{let n=et(t.cid,a),r=t.ref?et(t.ref,a):null;e.insertBefore(n,r)}break;case r.Remove:for(let n of t.cid){let t=et(n,a);e.removeChild(t)}break;case r.Replace:{let n=t.nid.map(e=>et(e,a));e.replaceWith(...n)}break;case r.SetAttribute:null===t.value?e.removeAttribute(t.key):(e.setAttribute(t.key,t.value),t.value&&"__lynx_timing_flag"===t.key&&d.push(t.value));break;case r.SwapElement:{let n=et(t.tid,a),r=document.createElement("div");e.replaceWith(r),n.replaceWith(e),r.replaceWith(n)}break;case r.SetProperty:if(e[w][t.key]=t.value,"dataset"===t.key){if(t.value)for(let[n,r]of Object.entries(t.value))r?e.setAttribute(`data-${n}`,r.toString()):e.removeAttribute(`data-${n}`);else e[w].dataset={}}break;case r.SetDatasetProperty:e[w].dataset[t.key]=t.value,t.value?e.setAttribute(`data-${t.key}`,t.value.toString()):e.removeAttribute(`data-${t.key}`);break;case r.RegisterEventHandler:let n=null===t.hname,s=t.ename.toLowerCase(),c=C[e.tagName]?.[s]??_[s]??s;e[w].eventHandler[s]&&e.removeEventListener(c,en);let u="capture-bind"===t.eventType||"capture-catch"===t.eventType;void 0===t.hname?(e.removeAttribute(`x-enable-${s}-event`),e[w].eventHandler[s]=void 0):(e.setAttribute(`x-enable-${s}-event`,""),e.addEventListener(c,en,{passive:!0,capture:u}),e[w].eventHandler[s]={type:t.eventType,handler:n?o.mtsHandler:o.btsHandler,hname:t.hname??""});break;case r.SetStyleProperty:e.style.setProperty(t.key,t.value,t.im?"!important":void 0);break;case r.UpdateCssInJs:let h=i[t.uid]?.deref();h?h.style.cssText=t.classStyleStr:(h=l(t.uid,t.classStyleStr),i[t.uid]=new WeakRef(h))}}return n}(e,{timingFlags:m,uniqueIdToElement:h,uniqueIdToCssInJsRule:p,createElementImpl:T,createStyleRuleImpl:S,eventHandler:{mtsHandler:M,btsHandler:U}});i("ui_operation_flush_end",o);let l=!!t;if(l){let e=document.createElement("style");e.innerHTML=n,d.append(e),d.append(t),t.setAttribute(b,c),!1===s.defaultDisplayLinear&&t.setAttribute("lynx-default-display-linear","false")}i("layout_end",o),i("dispatch_end",o),a({pipelineId:o,timingFlags:m,isFP:l})})})}(p,B,{pageConfig:t,overrideTagMap:o,backgroundRpc:m,rootDom:s,entryId:u,currentLoadingTags:h},e=>{let{pipelineId:t,timingFlags:n,isFP:r}=e;r&&(function(e,t){let n,r=i.UNKNOWN;e.registerHandler(K,(e,a,s,l,o,d)=>(G(t,e,a,s,!0,d,e=>{try{let t=Q[l],a="function"==typeof e[l];t||a?(n=t?t(e,o):e[l](o),r=i.SUCCESS):r=i.METHOD_NOT_FOUND}catch(t){console.error("[lynx-web] invokeUIMethod: apply method faild with",t,e),r=i.PARAM_INVALID}},e=>{r=e}),{code:r,data:n}))}(m,s),function(e,t){e.registerHandler(j,(e,n,r,a,i,s)=>{G(t,e,n,r,a,s,e=>{!function(e,t){for(let n in t){let r=t[n];"text"===n&&e?.tagName==="X-TEXT"&&e.firstElementChild&&"RAW-TEXT"==e.firstElementChild.tagName&&(e=e.firstElementChild),CSS.supports(n,r)&&e.style?e.style.setProperty(n,r):e.setAttribute(n,r)}}(e,i)})})}(m,s),function(e,t){e.registerHandler(J,(e,n)=>{let r=t.querySelector(`[${v}="${n.componentId}"]`);r?.dispatchEvent(new CustomEvent(e,{...n.eventOption,detail:n.eventDetail}))})}(m,s),function(e,t){let n;e.registerHandler(V,(e,r,i)=>(G(t,a.ID_SELECTOR,r,"card"===e?"0":e,i,void 0,e=>{n=e}),[n?.getAttribute(v)??void 0]))}(m,s),function(e,t){let n=[],r=[],a=new Map;async function i(e){let t=X(e);t.detail["unique-id"]=parseFloat(e.target.getAttribute(y));let i=t.exposureID;"exposure"===e.type?(n.push(t),a.set(i,t)):(r.push(t),a.delete(i))}setInterval(()=>{if(n.length>0||r.length>0){let t=n,a=r;n=[],r=[],e.invoke(M,[{exposures:t,disExposures:a}])}},50),t.addEventListener("exposure",i,{passive:!0}),t.addEventListener("disexposure",i,{passive:!0}),e.registerHandler(U,async(t,n)=>{!t&&n&&e.invoke(M,[{exposures:[],disExposures:[...a.values()]}])})}(m,s),S()),el(t,n,r)},es)}),function(e,t){e.registerHandler(q,t)}(m,l.nativeModulesCall),{updateData:(e,t,n)=>{Promise.all([p.invoke(k,[e,{}]),m.invoke(k,[e,{}])]).then(()=>n?.())},dispose:async()=>{await m.invoke(P,[]),E()},sendGlobalEvent:T}}(l,{initData:c,globalProps:o,entryId:d,browserConfig:{supportAtScope:ei}},t,s,u,h)}({entryId:t,rootDom:e,templateUrl:this.#s,globalProps:this.#o,initData:this.#d,overrideLynxTagToHTMLTagMap:this.#u,nativeModulesUrl:this.#m,callbacks:{loadNewTag:ep,nativeModulesCall:(...e)=>{if(this.#p)return this.#p(...e);this.#h?this.#h.push(e):this.#h=[e]},onError:()=>{this.dispatchEvent(new CustomEvent("error",{detail:s}))}}});this.#i={lynxView:l,rootDom:e},this.#b(),this.append(e)}}))}connectedCallback(){this.#l()}}customElements.get(em.tag)?console.warn(`[${em.tag}] has already been defined`):customElements.define(em.tag,em)}}]);